
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>GTNH ItemStack Aspect List</title>
  <link rel="icon" type="image/x-icon" href="favicon.png">
  <script src="https://cdn.jsdelivr.net/npm/ag-grid-community/dist/ag-grid-community.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #1f2836;
      padding: 20px;
    }

    #grid {
      height: 1000px;
      width: 100%;
    }

    #grid .ag-cell {
        border-right: 1px solid #666;
    }

    #grid .ag-header-cell {
        border-right: 1px solid #666;
    }

    #controls {
        margin-left: 5px;
        padding: 10px 0;
    }

    .footer {
        text-align: right;
        padding: 5px 0;
        color: #666;
        font-size: 14px;
    }
  </style>
</head>
<body>

<h2 style="color: #ffff">GTNH ItemStack Aspect List</h2>
<h4 style="color: navajowhite">Warning: This list is currently incomplete due to a mod bug with dumping aspects. It will be fixed when the mod is updated.</h4>
<div class="controls" id="controls">
    <div class="csv-selector">
        <label for="csvSelect" style="color:#ffff">Select GTNH Version:</label>
        <select id="csvSelect">
            <option value="2.8.4.csv">2.8.4</option>
        </select>
    </div>
</div>
<div id="grid"></div>
<div class="footer">
    <p>Created with <a href="https://www.ag-grid.com/">ag-grid</a></p>
    <p>Created by <a href="https://github.com/electrolyte220/">Electrolyte</a></p>
</div>
<script>

const myTheme = agGrid.themeQuartz
	.withParams({
        backgroundColor: "#1f2836",
        browserColorScheme: "dark",
        chromeBackgroundColor: {
            ref: "foregroundColor",
            mix: 0.07,
            onto: "backgroundColor"
        },
        foregroundColor: "#FFF",
        headerFontSize: 14
    });

  const gridOptions = {
    columnDefs: [],
    rowData: [],
    defaultColDef: {
      sortable: true,
      filter: true,
      resizable: true
    },
    pagination: true,
    paginationPageSize: 25,
    paginationPageSizeSelector: [25, 50, 100, 500, 1000, 2500, 5000, 10000, 15000],
    theme: myTheme,
    cacheQuickFilter: true,
    rowSelection: { mode: 'multiRow', enableClickSelection: true, checkboxes: false },
    includeHiddenColumnsInQuickFilter: true
  };

  const gridDiv = document.querySelector('#grid');
  gridApi = agGrid.createGrid(gridDiv, gridOptions);

  const csvSelect = document.getElementById('csvSelect');
  csvSelect.addEventListener('change', e => {
    loadCSV(e.target.value)
  })



  loadCSV('2.8.4.csv')
  async function loadCSV(filename) {
    fetch(filename)
      .then(response => response.text())
      .then(csvText => {
        Papa.parse(csvText, {
          header: true,
          skipEmptyLines: true,
          delimiter: ';',
          dynamicTyping: true,
          complete: function(results) {
            const data = results.data;
            const columns = Object.keys(data[0]).map((key, index) => ({
              field: key,
              width: index === 0 ? 500 : 125,
              cellDataType: index === 0 ? 'text' : 'number',
              valueFormatter: p => {
                if(p.value === null || p.value === undefined) {
                    return '';
                    }
              }
            }));

            gridApi.setGridOption('columnDefs', columns);
            gridApi.setGridOption('rowData', data);
          }
        });
      });
  }
</script>
</body>
</html>
